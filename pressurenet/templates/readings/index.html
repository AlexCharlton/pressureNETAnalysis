{% load url from future %}

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>pressureNET Data Analysis</title>
    
	  <link rel="shortcut icon" href="http://www.cumulonimbus.ca/wp-content/themes/capillatus/favicon.gif" />
    
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style.css"/>
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    
    <script language="Javascript" type="text/javascript" src="{{ STATIC_URL }}js/jquery-1.8.2.js"></script>
    <script language="Javascript" type="text/javascript" src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <script language="Javascript" type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=&sensor=false"></script>
    
	  <script language="Javascript" type="text/javascript" src="{{ STATIC_URL }}js/defaults.js"></script>
    <script language="Javascript" type="text/javascript" src="{{ STATIC_URL }}js/jquery.flot.js"></script> 
    <script language="Javascript" type="text/javascript" src="{{ STATIC_URL }}js/pressurenet.analysis.js"></script> 
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', '']);
      _gaq.push(['_trackPageview']);

      (function() {
         var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
         ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
         var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

     </script>
  </head>
  <body>
    <header>
      <h1><span>pressureNET</span> Data Visualization Tool</h1>
      <nav>
			  <a class="page-link off" data-page="live">Live Stream</a>
			  <a class="page-link off" data-page="about">About</a>
        <a id="cb-link" href="http://cumulonimbus.ca">Cumulonimbus</a>
        <a href="https://play.google.com/store/apps/details?id=ca.cumulonimbus.barometernetwork" target="_blank">Download pressureNET</a>
      </nav>
    </header>
    
	<div id="screen"></div>
	<section id="pages">

		<a id="close"></a>

		<article id="live" class="page">

			<h2>Live Streaming</h2>

			<p>If you are a researcher at an educational institution or a meteorological organization and are interested in accessing our live data stream, please contact us. We are interested in sharing our live atmospheric pressure data, especially to those who are looking to improve weather forecasting.</p>

			<a class="contact" href="mailto:livestream@cumulonimbus.ca">Email us to discuss the live stream</a>

		</article>
	
		<article id="about" class="page">

			<h2>About the Data Visualization Tool</h2>

			<p><a href="https://play.google.com/store/apps/details?id=ca.cumulonimbus.barometernetwork">pressureNET</a> is an open source barometer network that runs on Android and collects atmopsheric pressure measurements from barometers inside phones and tablets. The project is <a href="https://github.com/JacobSheehy/pressureNET">open source on GitHub</a>. We plan on using the collected data to improve weather forecasting models. This site is a visualization of the data in our archives. By selecting dates and changing the map location you can see a graph of the raw data we have collected.  We are working to make this an open data set while respecting user privacy, and we intend to build an API that lets anyone pull data from the archive. If you like this project, please consider downloading <a href="https://play.google.com/store/apps/details?id=ca.cumulonimbus.barometernetwork">pressureNET</a> from Google Play.</p> 

		</article>
    </section>

    <section id="date-range" class="full">
      <label for="start_date"> From</label> <input type="text" name="start_date" id="start_date" class="dateselector" placeholder="Start Date" size="10"/>
      <label for="end_date">To</label> <input type="text" id="end_date" name="end_date" class="dateselector" placeholder="End Date" size="10"/>
      <input type="button" value="Load" onClick="PressureNET.loadAndUpdate(0);"  />

    </section>
        
    <section id="query_results" class="full"></section>
    <section id="share_spot">
      <input type="text" id="share_input" style="width:90%"/> &nbsp;
      <a onClick="$('#share_spot').hide();" style="cursor:pointer;">X</a>
    </section>

    <section id="map_canvas" class="full" style="height:250px"></section>  
    
    <section style="display:none" id="current_position" class="full"></section>
      
    <section id="placeholder" class="full" style="width:640px;height:300px;"></section>
    
    <section id="graph_info" class="full" style="display:block">
      <p>This graph is a plot of our raw atmospheric pressure data in millibars over time (some outliers have been discarded). Below is a table of information about the graph.</p>

      <table class="graph_info_table">
        <tr>
          <td>
            <p>Latitute</p>
          </td>
          <td>
            <pre id="minVisLatCell"></pre>
          </td>
          <td>
            <p>to</p>
          </td>
          <td>
            <pre id="maxVisLatCell"></pre>
          </td>
        </tr>
        <tr>
          <td>
            <p>Longitude</p>
          </td>
          <td>
            <pre id="minVisLonCell"></pre>
          </td>
          <td>
            <p>to</p>
          </td>
          <td>
            <pre id="maxVisLonCell"></pre>
          </td>
        </tr>
        <tr>
          <td>
            <p>Time</p>
          </td>
          <td>
            <pre id="startTimeCell"></pre>
          </td>
          <td>
            <p>to</p>
          </td>
          <td>
            <pre id="endTimeCell"></pre>
          </td>
        </tr>
        <tr>
          <td>
            <p>Measurements</p>
          </td>
          <td colspan="3">
            <pre id="resultsCountCell"></pre>
          </td>
        </tr>
      </table>     

    </section>

    <section id="events" class="full">
      <section id="notable-events" class="half">
        <h2>Notable Events</h2>
        <ul id="event-list">
          <li><a onClick="PressureNET.loadEventInfo('sandy')" style="cursor:pointer">Hurricane Sandy</a></li>
          <li><a onClick="PressureNET.loadEventInfo('noreaster')" style="cursor:pointer">Post-Sandy Nor'easter</a></li>
          <li><a onClick="PressureNET.loadEventInfo('isaac')" style="cursor:pointer">Hurricane Isaac</a></li>
          <li>Coming soon: Pacific Typhoons</li>
        </ul>
      </section>
      <section id="event-info" class="half">
        <hgroup>
          <h2><span id="event_title_text"></span></h2>
          <h4><span id="event_date_text"></span></h4>
          <h5><span id="event_link_text"></span></h5>
        </hgroup>
        <p><span id="event_main_text"></span></p>
      </section>
    </section>

    <footer>
      <a class="contact" style="cursor:pointer;" onClick="PressureNET.alertCumulonimbus()" title="E-mail us!">Found something interesting? Let us know!</a>
    </footer>

    <script type="text/javascript">
        PressureNET.initialize({
            readingsUrl: '{% url 'readings-list' %}'
        });
    </script>

  </body>
</html>
